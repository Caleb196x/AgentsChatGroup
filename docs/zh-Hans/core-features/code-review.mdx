---
title: "代码审查与会话控制"
description: "审查代码变更、管理上下文和控制您的 AI 团队"
---

当 AI 成员完成编程任务时，您可以通过内置工具审查他们的工作并管理整个会话。

## 查看代码变更

代理完成任务后，您会在其消息下方看到**代码变更**卡片。

点击打开**差异查看器**，显示：
- 添加、修改或删除的文件
- 带语法高亮的逐行变更
- 前后对比

<Tip>
差异查看器只显示已跟踪的 git 变更。确保您的工作空间是 git 仓库。
</Tip>

## 工作空间抽屉

点击 AI 成员的工作空间打开**工作空间抽屉**，提供：

### 工作空间路径
此代理工作的目录。

### 运行历史
此代理所有任务运行的列表，显示：
- 每个任务的运行时间
- 成功或失败状态
- 快速访问输出

### 运行日志
每次执行的详细日志，用于调试或了解代理做了什么。

## 理解Agents运行

添加的AI Members代理每次运行都会生成以下几个输出文件（位于[workspace]/.agents-chatgroup/.runs/目录）：

| 文件 | 用途 |
|------|---------|
| 输入(input.md) | 发送给代理的任务提示 |
| 输出(output.md) | 代理的响应和摘要 |
| 日志(raw.log) | 详细的执行日志 |
| 差异(diff.patch) | 代码变更（如果有 git 变更） |

<Note>
大于 4KB 的差异会被截断以提高性能。您可以在 git 客户端中查看完整变更。
</Note>

## 新文件

当代理创建的新文件未被 git 跟踪时，它们会出现在单独的**未跟踪文件**部分。

<Warning>
大于 1MB 的未跟踪文件不会被捕获。
</Warning>

## 运行控制

### 停止代理

如果代理耗时过长或方向错误：

1. 在侧边栏找到运行中的代理（显示"运行中"状态）
2. 点击**停止**按钮
3. 代理将停止当前任务

<Tip>
停止代理后，您可以发送新消息并提供更清晰的指令。
</Tip>


### 任务队列

当您向正在运行的代理发送任务时：
- 新任务自动排队
- 出现确认对话框
- 代理完成后按顺序执行任务

## 上下文管理

系统自动为您的 AI 代理管理对话上下文。

### 上下文如何工作

每个 AI 成员接收：
- **会话成员** - 聊天中有谁及其角色
- **最近消息** - 对话历史，过长的聊天历史会被进行语义压缩
- **引用内容** - 任何被引用的消息或附件

### 自动上下文压缩

为保持对话高效：
- 最多保留 30 条消息在上下文中
- 最近 5 条消息始终完整保留
- 旧消息自动摘要

<Note>
您无需手动管理上下文 - 系统会自动处理，同时保留重要信息。
</Note>

## 会话管理工具

### 搜索消息

使用搜索功能在会话中查找特定消息或讨论。

### 批量删除

在清理模式下，您可以一次选择并删除多条消息。

### 消息历史

完整的对话历史被保留，随时可供参考。

### 归档会话

当项目完成或暂停时：

1. 点击会话上的**归档**
2. 会话变为只读
3. 所有消息和成员被保留

要稍后继续工作，点击**恢复**重新激活会话。

## 有效审查的技巧

1. **首先检查差异** - 快速查看代码有什么变更
2. **阅读输出** - 了解代理打算做什么
3. **需要时查看日志** - 当有问题时深入细节
4. **用提及跟进** - 如有需要，请代理修改或解释

```
@Coder 登录函数看起来不错，但你能为无效凭据添加错误处理吗？
```

## 总结

以上涵盖了 Agent ChatGroup 的核心功能！您现在知道如何：

- 创建和管理聊天会话
- 添加具有特定角色的 AI 成员
- 使用 @提及分配任务
- 审查代码变更和运行历史
- 控制运行中的代理和管理上下文
- 归档和组织您的会话

<CardGroup cols={2}>
  <Card title="支持的代理" icon="robot" href="/zh-Hans/supported-coding-agents">
    查看所有兼容的编程代理
  </Card>
  <Card title="故障排除" icon="wrench" href="/zh-Hans/troubleshooting">
    获取常见问题的帮助
  </Card>
</CardGroup>
